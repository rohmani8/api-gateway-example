{
  "$schema": "https://www.krakend.io/schema/v3.json",
  "version": 3,
  "name": "DEV RED ERP - API Gateway",
  "timeout": "3000ms",
  "cache_ttl": "300s",
  "output_encoding": "json",
  "host": ["http://192.168.10.194:8081"],
  "port": 8080,
  "tls_client":{
    "allow_insecure_connections":true
  },
  "extra_config": {"auth/validator":{"@comment":"JWK shared cache amongst all endpoints of 15 minutes","shared_cache_duration":900},"router":{"return_error_msg":true},"telemetry/logging":{"level":"DEBUG","prefix":"[KRAKEND]","stdout":true,"syslog":false}},
  "endpoints": [




{
    "endpoint": "/api/auth/tokens",
    "method": "POST",
    "output_encoding": "json",
    "backend": [
    {
        "url_pattern": "/api/v1/auth/tokens",
        "encoding": "json",
        "sd": "static",
        "method": "POST",
        "disable_host_sanitize": true
    }
    ],
    "input_query_strings": []
},
{
    "endpoint": "/api/auth/tokens",
    "method": "PUT",
    "output_encoding": "json",
    "extra_config": { "auth/validator": {
    "alg": "HS512",
    "jwk_url": "http://192.168.10.194:8081/api/v1/auth/jwk",
    "disable_jwk_security": true,
    "cache": true,
    "cache_duration": 3600,
    "@comment": "Rest of the validator options omitted for simplicity"
} },
    "input_headers": [
        "Authorization",
        "Content-Type"
    ],
    "backend": [
        {
            "url_pattern": "/api/v1/auth/tokens",
            "encoding": "json",
            "sd": "static",
            "method": "PUT",
            "disable_host_sanitize": true
        }
    ],
    "input_query_strings": []
},
{
    "endpoint": "/api/auth/verify_token",
    "method": "GET",
    "output_encoding": "json",
    "extra_config": { "auth/validator": {
    "alg": "HS512",
    "jwk_url": "http://192.168.10.194:8081/api/v1/auth/jwk",
    "disable_jwk_security": true,
    "cache": true,
    "cache_duration": 3600,
    "@comment": "Rest of the validator options omitted for simplicity"
} },
    "input_headers": [
        "Authorization",
        "Content-Type"
    ],
    "backend": [
        {
            "url_pattern": "/api/v1/windows/user/{JWT.AD_User_ID}",
            "encoding": "json",
            "sd": "static",
            "method": "GET",
            "disable_host_sanitize": true
        }
    ],
    "input_query_strings": []
},
{
    "endpoint": "/api/auth/setup",
    "method": "GET",
    "output_encoding": "json",
    "extra_config": { "auth/validator": {
    "alg": "HS512",
    "jwk_url": "http://192.168.10.194:8081/api/v1/auth/jwk",
    "disable_jwk_security": true,
    "cache": true,
    "cache_duration": 3600,
    "@comment": "Rest of the validator options omitted for simplicity"
} },
    "input_headers": [
        "Authorization",
        "Content-Type"
    ],
    "backend": [
        {
            "url_pattern": "/api/v1/auth/language",
            "encoding": "json",
            "sd": "static",
            "method": "GET",
            "disable_host_sanitize": true
        },
        {
            "url_pattern": "/api/v1/auth/roles",
            "encoding": "json",
            "sd": "static",
            "method": "GET",
            "disable_host_sanitize": true
        },
        {
            "url_pattern": "/api/v1/auth/organizations",
            "encoding": "json",
            "sd": "static",
            "method": "GET",
            "disable_host_sanitize": true
        },
        {
            "url_pattern": "/api/v1/auth/warehouses",
            "encoding": "json",
            "sd": "static",
            "method": "GET",
            "disable_host_sanitize": true
        }
    ],
    "input_query_strings": [
        "client",
        "role",
        "organization"
    ]
}
,

{
    "endpoint": "/api/asset/print",
    "method": "GET",
    "output_encoding": "json",
    "extra_config": { "auth/validator": {
    "alg": "HS512",
    "jwk_url": "http://192.168.10.194:8081/api/v1/auth/jwk",
    "disable_jwk_security": true,
    "cache": true,
    "cache_duration": 3600,
    "@comment": "Rest of the validator options omitted for simplicity"
} },
    "input_headers": [
        "Authorization",
        "Content-Type"
    ],
    "backend": [
    {
        "url_pattern": "/api/v1/processes/rv_asset_parent_report",
        "encoding": "json",
        "sd": "static",
        "method": "POST",
        "disable_host_sanitize": true
    }
    ],
    "input_query_strings": []
},
{
    "endpoint": "/api/asset/option",
    "method": "GET",
    "output_encoding": "json",
    "extra_config": { "auth/validator": {
    "alg": "HS512",
    "jwk_url": "http://192.168.10.194:8081/api/v1/auth/jwk",
    "disable_jwk_security": true,
    "cache": true,
    "cache_duration": 3600,
    "@comment": "Rest of the validator options omitted for simplicity"
} },
    "input_headers": [
        "Authorization",
        "Content-Type"
    ],
    "backend": [
    {
        "url_pattern": "/api/v1/models/a_asset?$select=name,m_product_id",
        "encoding": "json",
        "sd": "static",
        "method": "GET",
        "disable_host_sanitize": true
    }
    ],
    "input_query_strings": []
}
,

{
    "endpoint": "/api/menus",
    "method": "GET",
    "output_encoding": "json",
    "extra_config": { "auth/validator": {
    "alg": "HS512",
    "jwk_url": "http://192.168.10.194:8081/api/v1/auth/jwk",
    "disable_jwk_security": true,
    "cache": true,
    "cache_duration": 3600,
    "@comment": "Rest of the validator options omitted for simplicity"
} },
    "input_headers": [
        "Authorization",
        "Content-Type"
    ],
    "backend": [
    {
        "url_pattern": "/api/v1/models/ad_menu_tree",
        "encoding": "json",
        "sd": "static",
        "method": "GET",
        "disable_host_sanitize": true
    }
    ],
    "input_query_strings": []
}
,

{
    "endpoint": "/api/{window}",
    "method": "GET",
    "output_encoding": "json",
    "extra_config": { "auth/validator": {
    "alg": "HS512",
    "jwk_url": "http://192.168.10.194:8081/api/v1/auth/jwk",
    "disable_jwk_security": true,
    "cache": true,
    "cache_duration": 3600,
    "@comment": "Rest of the validator options omitted for simplicity"
} },
    "input_headers": [
        "Authorization",
        "Content-Type"
    ],
    "backend": [
    {
        "url_pattern": "/api/v1/windows/{window}",
        "encoding": "json",
        "sd": "static",
        "method": "GET",
        "disable_host_sanitize": true
    }
    ],
    "input_query_strings": [
        "$select"
    ]
},
{
    "endpoint": "/api/{window}/{id}",
    "method": "GET",
    "output_encoding": "json",
    "extra_config": { "auth/validator": {
    "alg": "HS512",
    "jwk_url": "http://192.168.10.194:8081/api/v1/auth/jwk",
    "disable_jwk_security": true,
    "cache": true,
    "cache_duration": 3600,
    "@comment": "Rest of the validator options omitted for simplicity"
} },
    "input_headers": [
        "Authorization",
        "Content-Type"
    ],
    "backend": [
    {
        "url_pattern": "/api/v1/windows/{window}/{id}",
        "encoding": "json",
        "sd": "static",
        "method": "GET",
        "disable_host_sanitize": true
    }
    ],
    "input_query_strings": [
         "$select"
    ]
},
{
    "endpoint": "/api/{window}/{id}/print",
    "method": "GET",
    "output_encoding": "json",
    "extra_config": { "auth/validator": {
    "alg": "HS512",
    "jwk_url": "http://192.168.10.194:8081/api/v1/auth/jwk",
    "disable_jwk_security": true,
    "cache": true,
    "cache_duration": 3600,
    "@comment": "Rest of the validator options omitted for simplicity"
} },
    "input_headers": [
        "Authorization",
        "Content-Type"
    ],
    "backend": [
    {
        "url_pattern": "/api/v1/windows/{window}/{id}/print",
        "encoding": "json",
        "sd": "static",
        "method": "GET",
        "disable_host_sanitize": true
    }
    ],
    "input_query_strings": [
        "$report_type"
    ]
},
{
    "endpoint": "/api/{window}/tabs",
    "method": "GET",
    "output_encoding": "json",
    "extra_config": { "auth/validator": {
    "alg": "HS512",
    "jwk_url": "http://192.168.10.194:8081/api/v1/auth/jwk",
    "disable_jwk_security": true,
    "cache": true,
    "cache_duration": 3600,
    "@comment": "Rest of the validator options omitted for simplicity"
} },
    "input_headers": [
        "Authorization",
        "Content-Type"
    ],
    "backend": [
    {
        "url_pattern": "/api/v1/windows/{window}/tabs",
        "encoding": "json",
        "sd": "static",
        "method": "GET",
        "disable_host_sanitize": true
    }
    ],
    "input_query_strings": []
},
{
    "endpoint": "/api/{window}/tabs/{tab}/fields",
    "method": "GET",
    "output_encoding": "json",
    "extra_config": { "auth/validator": {
    "alg": "HS512",
    "jwk_url": "http://192.168.10.194:8081/api/v1/auth/jwk",
    "disable_jwk_security": true,
    "cache": true,
    "cache_duration": 3600,
    "@comment": "Rest of the validator options omitted for simplicity"
} },
    "input_headers": [
        "Authorization",
        "Content-Type"
    ],
    "backend": [
    {
        "url_pattern": "/api/v1/windows/{window}/tabs/{tab}/fields",
        "encoding": "json",
        "sd": "static",
        "method": "GET",
        "disable_host_sanitize": true
    }
    ],
    "input_query_strings": []
},
{
    "endpoint": "/api/{window}",
    "method": "POST",
    "output_encoding": "json",
    "extra_config": { "auth/validator": {
    "alg": "HS512",
    "jwk_url": "http://192.168.10.194:8081/api/v1/auth/jwk",
    "disable_jwk_security": true,
    "cache": true,
    "cache_duration": 3600,
    "@comment": "Rest of the validator options omitted for simplicity"
} },
    "input_headers": [
        "Authorization",
        "Content-Type"
    ],
    "backend": [
    {
        "url_pattern": "/api/v1/windows/{window}",
        "encoding": "json",
        "sd": "static",
        "method": "POST",
        "disable_host_sanitize": true
    }
    ],
    "input_query_strings": []
},
{
    "endpoint": "/api/{window}/tabs/{tab}/{id}",
    "method": "PUT",
    "output_encoding": "json",
    "extra_config": { "auth/validator": {
    "alg": "HS512",
    "jwk_url": "http://192.168.10.194:8081/api/v1/auth/jwk",
    "disable_jwk_security": true,
    "cache": true,
    "cache_duration": 3600,
    "@comment": "Rest of the validator options omitted for simplicity"
} },
    "input_headers": [
        "Authorization",
        "Content-Type"
    ],
    "backend": [
    {
        "url_pattern": "/api/v1/windows/{window}/tabs/{tab}/{id}",
        "encoding": "json",
        "sd": "static",
        "method": "PUT",
        "disable_host_sanitize": true
    }
    ],
    "input_query_strings": []
},
{
    "endpoint": "/api/{window}/tabs/{tab}/{id}",
    "method": "DELETE",
    "output_encoding": "json",
    "extra_config": { "auth/validator": {
    "alg": "HS512",
    "jwk_url": "http://192.168.10.194:8081/api/v1/auth/jwk",
    "disable_jwk_security": true,
    "cache": true,
    "cache_duration": 3600,
    "@comment": "Rest of the validator options omitted for simplicity"
} },
    "input_headers": [
        "Authorization",
        "Content-Type"
    ],
    "backend": [
    {
        "url_pattern": "/api/v1/windows/{window}/tabs/{tab}/{id}",
        "encoding": "json",
        "sd": "static",
        "method": "DELETE",
        "disable_host_sanitize": true
    }
    ],
    "input_query_strings": []
}


]
}